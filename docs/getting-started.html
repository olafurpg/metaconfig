<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Getting started · Metaconfig</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Metaconfig is a library to read HOCON configuration into Scala case classes. Key"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Getting started · Metaconfig"/><meta property="og:type" content="website"/><meta property="og:url" content="https://scalameta.org/metaconfig/metaconfig/index.html"/><meta property="og:description" content="Metaconfig is a library to read HOCON configuration into Scala case classes. Key"/><meta property="og:image" content="https://scalameta.org/metaconfig/metaconfig/img/scalameta-logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://scalameta.org/metaconfig/metaconfig/img/scalameta-logo.png"/><link rel="shortcut icon" href="/metaconfig/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-140140828-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/metaconfig/css/custom.css"/><script src="/metaconfig/js/scrollSpy.js"></script><link rel="stylesheet" href="/metaconfig/css/main.css"/><script src="/metaconfig/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/metaconfig/"><img class="logo" src="/metaconfig/img/scalameta-logo.png" alt="Metaconfig"/><h2 class="headerTitleWithLogo">Metaconfig</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/metaconfig/docs/getting-started.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/scalameta/metaconfig" target="_blank">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Overview</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/metaconfig/docs/getting-started.html">Getting started</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/scalameta/metaconfig/edit/master/docs/getting-started.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Getting started</h1></header><article><div><span><p>Metaconfig is a library to read HOCON configuration into Scala case classes. Key
features of Metaconfig include</p>
<ul>
<li>helpful error messages on common mistakes like typos or type mismatch
(expected string, obtained int)</li>
<li>configurable, semi-automatic derivation of decoders, with support for
deprecating setting options</li>
<li>cross-platform, supports JS/JVM. Native support is on the roadmap</li>
</ul>
<p>The target use-case for metaconfig is tool maintainers who support HOCON
configuration in their tool. Metaconfig is used by scalafmt to read
<code>.scalafmt.conf</code> and scalafix to read <code>.scalafix.conf</code>. With metaconfig, tool
maintainers should be able to safely evolve their configuration (deprecate old
fields, add new fields) without breaking existing configuration files. Users
should get helpful error messages when they mistype a setting name.</p>
<p>There are alternatives to metaconfig that you might want to give a try first</p>
<ul>
<li><a href="https://github.com/circe/circe-config">https://github.com/circe/circe-config</a></li>
<li><a href="https://github.com/pureconfig/pureconfig">https://github.com/pureconfig/pureconfig</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.geirsson"</span> %% <span class="hljs-string">"metaconfig-core"</span> % <span class="hljs-string">"0.9.10-8-d27e839e-20200418-1344-SNAPSHOT"</span>

<span class="hljs-comment">// Use https://github.com/lightbend/config to parse HOCON</span>
libraryDependencies += <span class="hljs-string">"com.geirsson"</span> %% <span class="hljs-string">"metaconfig-typesafe-config"</span> % <span class="hljs-string">"0.9.10-8-d27e839e-20200418-1344-SNAPSHOT"</span>
</code></pre>
<p>Use this import to access the metaconfig API</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">import</span> metaconfig._
</code></pre>
<p>All of the following code examples assume that you have <code>import metaconfig._</code> in
scope.</p>
<!-- TOC -->
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#conf">Conf</a></li>
<li><a href="#confparse">Conf.parse</a></li>
<li><a href="#confprinthocon">Conf.printHocon</a></li>
<li><a href="#confpatch">Conf.patch</a></li>
<li><a href="#confdecoder">ConfDecoder</a></li>
<li><a href="#confencoder">ConfEncoder</a></li>
<li><a href="#confcodec">ConfCodec</a></li>
<li><a href="#conferror">ConfError</a></li>
<li><a href="#configured">Configured</a></li>
<li><a href="#genericderivesurface">generic.deriveSurface</a></li>
<li><a href="#genericderivedecoder">generic.deriveDecoder</a>
<ul>
<li><a href="#limitations">Limitations</a></li>
</ul></li>
<li><a href="#deprecatedname">@DeprecatedName</a></li>
<li><a href="#confparsecliargs">Conf.parseCliArgs</a></li>
<li><a href="#settingstoclihelp">Settings.toCliHelp</a></li>
<li><a href="#inline">@Inline</a></li>
<li><a href="#docs">Docs</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#json-schema">JSON Schema</a></li>
</ul>
<!-- /TOC -->
<h2><a class="anchor" aria-hidden="true" id="conf"></a><a href="#conf" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conf</h2>
<p><code>Conf</code> is a JSON-like data structure that is the foundation of metaconfig.</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">val</span> <span class="hljs-built_in">string</span> = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">String(<span class="hljs-string">"string"</span>)</span>
<span class="hljs-keyword">val</span> <span class="hljs-built_in">int</span> = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">Int(42)</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">List(<span class="hljs-params">int</span> :: <span class="hljs-params">string</span> :: Nil)</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">Map(Map(<span class="hljs-string">"a"</span> -&gt; <span class="hljs-params">string</span>, <span class="hljs-string">"b"</span> -&gt; <span class="hljs-params">int</span>)</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confparse"></a><a href="#confparse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conf.parse</h2>
<p>You need an implicit <code>MetaconfigParser</code> to convert HOCON into <code>Conf</code>. Assuming
you depend on the <code>metaconfig-typesafe-config</code> module,</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">import</span> metaconfig.typesafeconfig.<span class="hljs-number">_</span>
Conf.parseString(<span class="hljs-string">"""
a.b.c = 2
a.d = [ 1, 2, 3 ]
reference = ${a}
"""</span>)
Conf.parseFile(<span class="hljs-keyword">new</span> java.io.File(<span class="hljs-string">".scalafmt.conf"</span>))
</code></pre>
<p>Note. The example above is JVM-only. For a Scala.js alternative, depend on the
<code>metaconfig-sconfig</code> module and replace <code>metaconfig.typesafeconfig</code> with</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> metaconfig.sconfig._
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confprinthocon"></a><a href="#confprinthocon" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conf.printHocon</h2>
<p>It's possible to print <code>Conf</code> as
<a href="https://github.com/lightbend/config/blob/master/HOCON.md">HOCON</a>.</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">Conf</span>.printHocon(<span class="hljs-keyword">Conf</span>.Obj(
  <span class="hljs-string">"a"</span> -&gt; <span class="hljs-keyword">Conf</span>.Obj(
    <span class="hljs-string">"b"</span> -&gt; <span class="hljs-keyword">Conf</span>.Str(<span class="hljs-string">"3"</span>),
    <span class="hljs-string">"c"</span> -&gt; <span class="hljs-keyword">Conf</span>.Num(1),
    <span class="hljs-string">"d"</span> -&gt; <span class="hljs-keyword">Conf</span>.Lst(
      <span class="hljs-keyword">Conf</span>.Null(),
      <span class="hljs-keyword">Conf</span>.Bool(true)
))))
</code></pre>
<p>The printer is tested against the roundtrip property</p>
<pre><code class="hljs">parse(<span class="hljs-name">print</span>(<span class="hljs-name">conf</span>)) == conf
</code></pre>
<p>so it should be safe to parse the output from the printer.</p>
<h2><a class="anchor" aria-hidden="true" id="confpatch"></a><a href="#confpatch" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conf.patch</h2>
<p>Imagine the scenario</p>
<ul>
<li>your application has many configuration options with default values,</li>
<li>you have a custom configuration object that overrides only a few specific
fields.</li>
<li>you want to pretty-print the minimal HOCON configuration to obtain that custom
configuration</li>
</ul>
<p>Use <code>Conf.patch</code> compute a minimal <code>Conf</code> to go from an original <code>Conf</code> to a
revised <code>Conf</code>.</p>
<pre><code class="hljs css language-tut">val original = <span class="hljs-keyword">Conf</span>.Obj(
  <span class="hljs-string">"a"</span> -&gt; <span class="hljs-keyword">Conf</span>.Obj(
    <span class="hljs-string">"b"</span> -&gt; <span class="hljs-keyword">Conf</span>.Str(<span class="hljs-string">"c"</span>),
    <span class="hljs-string">"d"</span> -&gt; <span class="hljs-keyword">Conf</span>.Str(<span class="hljs-string">"e"</span>)
  ),
  <span class="hljs-string">"f"</span> -&gt; <span class="hljs-keyword">Conf</span>.Bool(true)
)
val revised = <span class="hljs-keyword">Conf</span>.Obj(
  <span class="hljs-string">"a"</span> -&gt; <span class="hljs-keyword">Conf</span>.Obj(
    <span class="hljs-string">"b"</span> -&gt; <span class="hljs-keyword">Conf</span>.Str(<span class="hljs-string">"c"</span>),
    <span class="hljs-string">"d"</span> -&gt; <span class="hljs-keyword">Conf</span>.Str(<span class="hljs-string">"ee"</span>) <span class="hljs-comment">// &lt;-- only overridden setting</span>
  ),
  <span class="hljs-string">"f"</span> -&gt; <span class="hljs-keyword">Conf</span>.Bool(true)
)
val patch = <span class="hljs-keyword">Conf</span>.patch(original, revised)
<span class="hljs-keyword">Conf</span>.printHocon(patch)
val revised2 = <span class="hljs-keyword">Conf</span>.applyPatch(original, patch)
<span class="hljs-keyword">assert</span>(revised == revised2)
</code></pre>
<p>The <code>patch</code> operation is tested against the property</p>
<pre><code class="hljs">apply<span class="hljs-constructor">Patch(<span class="hljs-params">original</span>, <span class="hljs-params">revised</span>)</span><span class="hljs-operator"> == </span>apply<span class="hljs-constructor">Patch(<span class="hljs-params">original</span>, <span class="hljs-params">patch</span>(<span class="hljs-params">original</span>, <span class="hljs-params">revised</span>)</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confdecoder"></a><a href="#confdecoder" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ConfDecoder</h2>
<p>To convert <code>Conf</code> into higher-level data structures you need a <code>ConfDecoder[T]</code>
instance. Convert a partial function from <code>Conf</code> to your target type using
<code>ConfDecoder.instance[T]</code>.</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">val</span> number2 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfDecoder</span>.</span></span>instance<span class="hljs-literal">[I<span class="hljs-identifier">nt</span>]</span> {
    case Conf.<span class="hljs-constructor">Str(<span class="hljs-string">"2"</span>)</span> =&gt; Configured.<span class="hljs-constructor">Ok(2)</span>
}
</code></pre>
<pre><code class="hljs css language-tut">number2.read(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">String(<span class="hljs-string">"2"</span>)</span>)
number2.read(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">Int(2)</span>)
</code></pre>
<p>Convert a regular function from <code>Conf</code> to your target type using
<code>ConfDecoder.instanceF[T]</code>.</p>
<pre><code class="hljs css language-tut:silent">case class User(name: String, age: Int)
val decoder = ConfDecoder.instanceF[User] { conf =&gt;
  conf.get[<span class="hljs-string">String</span>](<span class="hljs-link">"name"</span>).product(conf.get[<span class="hljs-string">Int</span>](<span class="hljs-link">"age"</span>)).map {
<span class="hljs-code">      case (name, age) =&gt; User(name, age)</span>
  }
}
</code></pre>
<pre><code class="hljs css language-tut">decoder.read(Conf.parseString(<span class="hljs-string">"""
name = "Susan"
age = 29
"""</span>))
decoder.read(Conf.parseString(<span class="hljs-string">"""
name = 42
age = "Susan"
"""</span>))
</code></pre>
<p>You can also use existing decoders to build more complex decoders</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">val</span> fileDecoder = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfDecoder</span>.</span></span>stringConfDecoder.flatMap {<span class="hljs-function"> <span class="hljs-params">string</span> =&gt;</span>
  <span class="hljs-keyword">val</span> file = <span class="hljs-keyword">new</span> java.io.<span class="hljs-constructor">File(<span class="hljs-params">string</span>)</span>
  <span class="hljs-keyword">if</span> (file.exists<span class="hljs-literal">()</span>) <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Configured</span>.</span></span>ok(file)
  <span class="hljs-keyword">else</span> <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>file<span class="hljs-constructor">DoesNotExist(<span class="hljs-params">file</span>)</span>.notOk
}
fileDecoder.read(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">String(<span class="hljs-string">".scalafmt.conf"</span>)</span>)
fileDecoder.read(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Conf</span>.</span></span>from<span class="hljs-constructor">String(<span class="hljs-string">".foobar"</span>)</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confencoder"></a><a href="#confencoder" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ConfEncoder</h2>
<p>To convert a class instance into <code>Conf</code> use <code>ConfEncoder[T]</code>. It's possible to
automatically derive a <code>ConfEncoder[T]</code> instance for any case class with
<code>generic.deriveEncoder</code>.</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">implicit</span> val encoder = <span class="hljs-keyword">generic</span>.deriveEncoder[User]

ConfEncoder[User].<span class="hljs-built_in">write</span>(User(<span class="hljs-string">"John"</span>, <span class="hljs-number">42</span>))
</code></pre>
<p>It's possible to compose <code>ConfEncoder</code> instances with <code>contramap</code></p>
<pre><code class="hljs css language-tut:silent">val ageEncoder = ConfEncoder.IntEncoder.contramap[<span class="hljs-string">User</span>](<span class="hljs-link">user =&gt; user.age</span>)
</code></pre>
<pre><code class="hljs">ageEncoder.<span class="hljs-keyword">write</span>(<span class="hljs-keyword">User</span>("Ignored", <span class="hljs-number">88</span>))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confcodec"></a><a href="#confcodec" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ConfCodec</h2>
<p>It's common to have a class that has both a <code>ConfDecoder[T]</code> and
<code>ConfEncoder[T]</code> instance. For convenience, it's possible to use the
<code>ConfCodec[T]</code> typeclass to wrap an encoder and decoder in one instance.</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> Bijective(<span class="hljs-keyword">name</span>: String)
<span class="hljs-keyword">implicit</span> val surface = <span class="hljs-keyword">generic</span>.deriveSurface[Bijective]
<span class="hljs-keyword">implicit</span> val codec = <span class="hljs-keyword">generic</span>.deriveCodec[Bijective](new Bijective(<span class="hljs-string">"default"</span>))
</code></pre>
<pre><code class="hljs css language-tut"><span class="hljs-selector-tag">ConfEncoder</span><span class="hljs-selector-attr">[Bijective]</span><span class="hljs-selector-class">.write</span>(Bijective(<span class="hljs-string">"John"</span>))
<span class="hljs-selector-tag">ConfDecoder</span><span class="hljs-selector-attr">[Bijective]</span><span class="hljs-selector-class">.read</span>(Conf.Obj(<span class="hljs-string">"name"</span> -&gt; Conf.Str(<span class="hljs-string">"Susan"</span>)))
</code></pre>
<p>It's possible to compose <code>ConfCodec</code> instances with <code>bimap</code></p>
<pre><code class="hljs css language-tut:silent">val bijectiveString = ConfCodec.StringCodec.bimap[<span class="hljs-string">Bijective</span>](<span class="hljs-link">_.name, Bijective(_</span>))
</code></pre>
<pre><code class="hljs css language-tut">bijectiveString.<span class="hljs-built_in">write</span>(Bijective(<span class="hljs-string">"write"</span>))
bijectiveString.<span class="hljs-built_in">read</span>(Conf.Str(<span class="hljs-string">"write"</span>))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="conferror"></a><a href="#conferror" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ConfError</h2>
<p><code>ConfError</code> is a helper to produce readable and potentially aggregated error
messages.</p>
<pre><code class="hljs css language-tut"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>message(<span class="hljs-string">"Not good!"</span>)
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span><span class="hljs-keyword">exception</span>(<span class="hljs-keyword">new</span> <span class="hljs-constructor">IllegalArgumentException(<span class="hljs-string">"Expected String!"</span>)</span>, stackSize = <span class="hljs-number">2</span>)
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span><span class="hljs-keyword">type</span><span class="hljs-constructor">Mismatch(<span class="hljs-string">"Int"</span>, <span class="hljs-string">"String"</span>, <span class="hljs-string">"field"</span>)</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>message(<span class="hljs-string">"Failure 1"</span>).combine(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>message(<span class="hljs-string">"Failure 2"</span>))
</code></pre>
<p>Metaconfig uses <code>Input</code> to represent a source that can be parsed and <code>Position</code>
to represent range positions in a given <code>Input</code></p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-meta">val</span> input = <span class="hljs-type">Input</span>.<span class="hljs-type">VirtualFile</span>(
  <span class="hljs-string">"foo.scala"</span>,
  <span class="hljs-string">"""
    |object A {
    |  var x
    |}
  """</span>.stripMargin
)
<span class="hljs-meta">val</span> i = input.text.indexOf(<span class="hljs-string">'v'</span>)
<span class="hljs-meta">val</span> pos = <span class="hljs-type">Position</span>.<span class="hljs-type">Range</span>(input, i, i)
</code></pre>
<pre><code class="hljs css language-tut"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>parse<span class="hljs-constructor">Error(<span class="hljs-params">pos</span>, <span class="hljs-string">"No var"</span>)</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="configured"></a><a href="#configured" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configured</h2>
<p><code>Configured[T]</code> is like an <code>Either[metaconfig.ConfError, T]</code> which is used
througout the metaconfig API to either represent a successfully parsed/decoded
value or a failure.</p>
<pre><code class="hljs css language-tut"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Configured</span>.</span></span>ok(<span class="hljs-string">"Hello world!"</span>)
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Configured</span>.</span></span>ok(<span class="hljs-constructor">List(1, 2)</span>)
<span class="hljs-keyword">val</span> error = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConfError</span>.</span></span>message(<span class="hljs-string">"Boom!"</span>)
<span class="hljs-keyword">val</span> configured = error.notOk
configured.toEither
</code></pre>
<p>To skip error handling, use the nuclear <code>.get</code></p>
<pre><code class="hljs css language-tut:fail">configured.<span class="hljs-builtin-name">get</span>
</code></pre>
<pre><code class="hljs css language-tut"><span class="hljs-selector-tag">Configured</span><span class="hljs-selector-class">.ok</span>(42)<span class="hljs-selector-class">.get</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="genericderivesurface"></a><a href="#genericderivesurface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>generic.deriveSurface</h2>
<p>To use automatic derivation, you first need a <code>Surface[T]</code> typeclass instance</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">import</span> metaconfig.<span class="hljs-keyword">generic</span>._
<span class="hljs-keyword">implicit</span> val userSurface: Surface[User] =
  <span class="hljs-keyword">generic</span>.deriveSurface[User]
</code></pre>
<p>The surface is used by metaconfig to support configurable decoding such as
alternative fields names. In the future, the plan is to use <code>Surface[T]</code> to
automatically generate html/markdown documentation for configuration settings.
For now, you can ignore <code>Surface[T]</code> and just consider it as an annoying
requirement from metaconfig.</p>
<h2><a class="anchor" aria-hidden="true" id="genericderivedecoder"></a><a href="#genericderivedecoder" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>generic.deriveDecoder</h2>
<p>Writing manual decoder by hand grows tiring quickly. This becomes especially
true when you have documentation to keep up-to-date as well.</p>
<pre><code class="hljs css language-tut:silent">implicit val decoder: ConfDecoder[User] =
  generic.deriveDecoder[<span class="hljs-string">User</span>](<span class="hljs-link">User("John", 42</span>)).noTypos
</code></pre>
<pre><code class="hljs css language-tut">ConfDecoder[User].read(Conf.parseString(<span class="hljs-string">"""
name = Susan
age = 34
"""</span>))
ConfDecoder[User].read(Conf.parseString(<span class="hljs-string">"""
nam = John
age = 23
"""</span>))
ConfDecoder[User].read(Conf.parseString(<span class="hljs-string">"""
name = John
age = Old
"""</span>))
</code></pre>
<p>Sometimes automatic derivation fails, for example if your class contains fields
that have no <code>ConfDecoder</code> instance</p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">import</span> java.io.<span class="hljs-keyword">File</span>
<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> Funky(<span class="hljs-keyword">file</span>: <span class="hljs-keyword">File</span>)
<span class="hljs-keyword">implicit</span> val surface = <span class="hljs-keyword">generic</span>.deriveSurface[Funky]
</code></pre>
<p>This will fail wiith a fail cryptic compile error</p>
<pre><code class="hljs css language-tut:fail"><span class="hljs-keyword">implicit</span> val decoder = <span class="hljs-keyword">generic</span>.deriveDecoder[Funky](Funky(new <span class="hljs-keyword">File</span>(<span class="hljs-string">""</span>)))
</code></pre>
<p>Observe that the error message is complaining about a missing
<code>metaconfig.ConfDecoder[java.io.File]</code> implicit.</p>
<h3><a class="anchor" aria-hidden="true" id="limitations"></a><a href="#limitations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations</h3>
<p>The following features are not supported by generic derivation</p>
<ul>
<li>derivation for objects, sealed traits or non-case classes, only case classes
are supported</li>
<li>parameterized types, it's possible to derive decoders for a concrete
parameterized type like <code>Option[Foo]</code> but note that the type field
(<code>Field.tpe</code>) will be pretty-printed to the generic representation of that
field: <code>Option[T].value: T</code>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="deprecatedname"></a><a href="#deprecatedname" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@DeprecatedName</h2>
<p>As your configuration evolves, you may want to rename some settings but you have
existing users who are using the old name. Use the <code>@DeprecatedName</code> annotation
to continue supporting the old name even if you go ahead with the rename.</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">import</span> metaconfig.annotation._
<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> EvolvingConfig(
    @DeprecatedName(<span class="hljs-string">"goodName"</span>, <span class="hljs-string">"Use isGoodName instead"</span>, <span class="hljs-string">"1.0"</span>)
    isGoodName: Boolean
)
<span class="hljs-keyword">implicit</span> val surface = <span class="hljs-keyword">generic</span>.deriveSurface[EvolvingConfig]
<span class="hljs-keyword">implicit</span> val decoder = <span class="hljs-keyword">generic</span>.deriveDecoder[EvolvingConfig](EvolvingConfig(true)).noTypos
</code></pre>
<pre><code class="hljs css language-tut">decoder.read(Conf.<span class="hljs-constructor">Obj(<span class="hljs-string">"goodName"</span> -&gt; Conf.<span class="hljs-params">fromBoolean</span>(<span class="hljs-params">false</span>)</span>))
decoder.read(Conf.<span class="hljs-constructor">Obj(<span class="hljs-string">"isGoodName"</span> -&gt; Conf.<span class="hljs-params">fromBoolean</span>(<span class="hljs-params">false</span>)</span>))
decoder.read(Conf.<span class="hljs-constructor">Obj(<span class="hljs-string">"gooodName"</span> -&gt; Conf.<span class="hljs-params">fromBoolean</span>(<span class="hljs-params">false</span>)</span>))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="confparsecliargs"></a><a href="#confparsecliargs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conf.parseCliArgs</h2>
<p>Metaconfig can parse command line arguments into a <code>Conf</code>.</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> App(
  @Description(<span class="hljs-string">"The directory to output files"</span>)
  <span class="hljs-keyword">target</span>: String = <span class="hljs-string">"out"</span>,
  @Description(<span class="hljs-string">"Print out debugging diagnostics"</span>)
  @ExtraName(<span class="hljs-string">"v"</span>)
  verbose: Boolean = false,
  @Description(<span class="hljs-string">"The input files for app"</span>)
  @ExtraName(<span class="hljs-string">"remainingArgs"</span>)
  files: List[String] = Nil
)
<span class="hljs-keyword">implicit</span> val surface = <span class="hljs-keyword">generic</span>.deriveSurface[App]
<span class="hljs-keyword">implicit</span> val codec = <span class="hljs-keyword">generic</span>.deriveCodec[App](App())
</code></pre>
<pre><code class="hljs css language-tut">val <span class="hljs-keyword">conf</span> = <span class="hljs-keyword">Conf</span>.parseCliArgs[<span class="hljs-keyword">App</span>](<span class="hljs-keyword">List</span>(
  <span class="hljs-string">"--verbose"</span>,
  <span class="hljs-string">"--target"</span>, <span class="hljs-string">"/tmp"</span>,
  <span class="hljs-string">"input.txt"</span>
))
</code></pre>
<p>Decode the cli args into <code>App</code> like normal</p>
<pre><code class="hljs css language-tut">val <span class="hljs-keyword">app</span> = decoder.<span class="hljs-keyword">read</span>(<span class="hljs-keyword">conf</span>.get)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="settingstoclihelp"></a><a href="#settingstoclihelp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Settings.toCliHelp</h2>
<p>Generate a --help message with a <code>Settings[T]</code>.</p>
<pre><code class="hljs css language-tut"><span class="hljs-type">Settings</span>[<span class="hljs-type">App</span>].toCliHelp(<span class="hljs-keyword">default</span> = <span class="hljs-type">App</span>())
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="inline"></a><a href="#inline" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@Inline</h2>
<p>If you have multiple cli apps that all share a base set of fields you can use
<code>@Inline</code>.</p>
<pre><code class="hljs css language-tut:silent"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">Common</span>(
  @Description(<span class="hljs-string">"The working directory"</span>)
  cwd: String = <span class="hljs-string">""</span>,
  @Description(<span class="hljs-string">"The output directory"</span>)
  <span class="hljs-keyword">out</span>: String = <span class="hljs-string">""</span>
)
<span class="hljs-keyword">implicit</span> val surface = <span class="hljs-keyword">generic</span>.deriveSurface[<span class="hljs-keyword">Common</span>]
<span class="hljs-keyword">implicit</span> val codec = <span class="hljs-keyword">generic</span>.deriveCodec[<span class="hljs-keyword">Common</span>](<span class="hljs-keyword">Common</span>())

<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> AgeApp(
  @Description(<span class="hljs-string">"The user's age"</span>)
  age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>,
  @Inline
  <span class="hljs-keyword">common</span>: <span class="hljs-keyword">Common</span> = <span class="hljs-keyword">Common</span>()
)
<span class="hljs-keyword">implicit</span> val ageSurface = <span class="hljs-keyword">generic</span>.deriveSurface[AgeApp]
<span class="hljs-keyword">implicit</span> val ageCodec = <span class="hljs-keyword">generic</span>.deriveCodec[AgeApp](AgeApp())

<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> NameApp(
  @Description(<span class="hljs-string">"The user's name"</span>)
  <span class="hljs-keyword">name</span>: String = <span class="hljs-string">"John"</span>,
  @Inline
  <span class="hljs-keyword">common</span>: <span class="hljs-keyword">Common</span> = <span class="hljs-keyword">Common</span>()
)
<span class="hljs-keyword">implicit</span> val nameSurface = <span class="hljs-keyword">generic</span>.deriveSurface[NameApp]
<span class="hljs-keyword">implicit</span> val nameCodec = <span class="hljs-keyword">generic</span>.deriveCodec[NameApp](NameApp())
</code></pre>
<p>Observe that <code>NameApp</code> and <code>AgeApp</code> both have an <code>@Inline common: Common</code> field.
It is not necessary to prefix cli args with the name of <code>@Inline</code> fields. In the
example above, it's possible to pass in <code>--out target</code> instead of
<code>--common.out target</code> to override the common output directory.</p>
<pre><code class="hljs css language-tut">Conf.parseCliArgs[<span class="hljs-string">NameApp</span>](<span class="hljs-link">List("--out", "/tmp", "--cwd", "working-dir"</span>))
val conf = Conf.parseCliArgs[<span class="hljs-string">AgeApp</span>](<span class="hljs-link">List("--out", "target", "--cwd", "working-dir"</span>))
conf.get.as[AgeApp].get
</code></pre>
<p>The generated --help message does not display <code>@Inline</code> fields. Instead, the
nested fields inside the type of the <code>@Inline</code> field are shown in the --help
message.</p>
<pre><code class="hljs css language-tut"><span class="hljs-type">Settings</span>[<span class="hljs-type">NameApp</span>].toCliHelp(<span class="hljs-keyword">default</span> = <span class="hljs-type">NameApp</span>())
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="docs"></a><a href="#docs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docs</h2>
<p>To generate documentation for you configuration, add a dependency to the
following module</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.geirsson"</span> %% <span class="hljs-string">"metaconfig-docs"</span> % <span class="hljs-string">"0.9.10-8-d27e839e-20200418-1344-SNAPSHOT"</span>
</code></pre>
<p>First define your configuration</p>
<pre><code class="hljs css language-tut:silent:reset"><span class="hljs-keyword">import</span> metaconfig._
<span class="hljs-keyword">import</span> metaconfig.annotation._
<span class="hljs-keyword">import</span> metaconfig.<span class="hljs-keyword">generic</span>._

<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> Home(
    @Description(<span class="hljs-string">"Address description"</span>)
    address: String = <span class="hljs-string">"Lakelands 2"</span>,
    @Description(<span class="hljs-string">"Country description"</span>)
    country: String = <span class="hljs-string">"Iceland"</span>
)
<span class="hljs-keyword">implicit</span> val homeSurface = <span class="hljs-keyword">generic</span>.deriveSurface[Home]
<span class="hljs-keyword">implicit</span> val homeEncoder = <span class="hljs-keyword">generic</span>.deriveEncoder[Home]

<span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> User(
    @Description(<span class="hljs-string">"Name description"</span>)
    <span class="hljs-keyword">name</span>: String = <span class="hljs-string">"John"</span>,
    @Description(<span class="hljs-string">"Age description"</span>)
    age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>,
    home: Home = Home()
)
<span class="hljs-keyword">implicit</span> val userSurface = <span class="hljs-keyword">generic</span>.deriveSurface[User]
<span class="hljs-keyword">implicit</span> val userEncoder = <span class="hljs-keyword">generic</span>.deriveEncoder[User]
</code></pre>
<p>To generate html documentation, pass in a default value</p>
<pre><code class="hljs css language-tut">docs.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Docs</span>.</span></span>html(<span class="hljs-constructor">User()</span>)
</code></pre>
<p>The output will look like this when rendered in a markdown or html document</p>
<pre><code class="hljs css language-tut:passthrough">println(<span class="hljs-name">docs</span>.Docs.html(<span class="hljs-name">User</span>()))
</code></pre>
<p>The <code>Docs.html</code> method does nothing magical, it's possible to implement custom
renderings by inspecting <code>Settings[T]</code> directly.</p>
<pre><code class="hljs css language-tut">Settings[User].settings
val flat = Settings[User].flat(User())
flat.map { <span class="hljs-keyword">case</span> (setting, defaultValue) =&gt;
  s<span class="hljs-string">"Setting <span class="hljs-subst">${setting.name}</span> of type <span class="hljs-subst">${setting.tpe}</span> has default value <span class="hljs-subst">$defaultValue</span>"</span>
}.mkString(<span class="hljs-string">"\n==============\n"</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="json"></a><a href="#json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON</h2>
<p>To parse JSON instead of HOCON use the <code>metaconfig-json</code> module.</p>
<pre><code class="hljs css language-scala"><span class="hljs-comment">// JVM-only</span>
libraryDependencies += <span class="hljs-string">"com.geirsson"</span> %% <span class="hljs-string">"metaconfig-json"</span> % <span class="hljs-string">"0.9.10-8-d27e839e-20200418-1344-SNAPSHOT"</span>
</code></pre>
<p>To parse JSON into <code>metaconfig.Conf</code></p>
<pre><code class="hljs css language-tut"><span class="hljs-keyword">import</span> metaconfig.json.parser
<span class="hljs-keyword">import</span> metaconfig._
</code></pre>
<pre><code class="hljs css language-tut">Conf.parseString(<span class="hljs-string">"""
{
  "a": 1,
  "b": [
    2,
    3,
    true,
    null
  ]
}
"""</span>)
</code></pre>
<p>The JSON parser supports comments and trailing commas</p>
<pre><code class="hljs css language-tut">Conf.parseString(<span class="hljs-string">"""</span>
{
  <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> don't set this to false!</span>
  <span class="hljs-string">"important"</span>: true,
  <span class="hljs-string">"dependencies"</span>: [
    <span class="hljs-string">"a"</span>,
    <span class="hljs-string">"b"</span>, <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> get rid of this dependency at some point</span>
  ],
}
<span class="hljs-string">""")</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="json-schema"></a><a href="#json-schema" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON Schema</h2>
<p>It's possible to automatically generate a JSON schema</p>
<pre><code class="hljs css language-tut">val js = metaconfig.JsonSchema.generate(
  title = <span class="hljs-string">"My User App"</span>,
  description = <span class="hljs-string">"My User APP description"</span>,
  url = Some(<span class="hljs-string">"http://my.user.app/schema.json"</span>),
 <span class="hljs-built_in"> default </span>= User()
)
ujson.write(js, indent = 2)
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#getting-started">Getting started</a></li><li><a href="#conf">Conf</a></li><li><a href="#confparse">Conf.parse</a></li><li><a href="#confprinthocon">Conf.printHocon</a></li><li><a href="#confpatch">Conf.patch</a></li><li><a href="#confdecoder">ConfDecoder</a></li><li><a href="#confencoder">ConfEncoder</a></li><li><a href="#confcodec">ConfCodec</a></li><li><a href="#conferror">ConfError</a></li><li><a href="#configured">Configured</a></li><li><a href="#genericderivesurface">generic.deriveSurface</a></li><li><a href="#genericderivedecoder">generic.deriveDecoder</a><ul class="toc-headings"><li><a href="#limitations">Limitations</a></li></ul></li><li><a href="#deprecatedname">@DeprecatedName</a></li><li><a href="#confparsecliargs">Conf.parseCliArgs</a></li><li><a href="#settingstoclihelp">Settings.toCliHelp</a></li><li><a href="#inline">@Inline</a></li><li><a href="#docs">Docs</a></li><li><a href="#json">JSON</a></li><li><a href="#json-schema">JSON Schema</a></li></ul></nav></div><footer class="nav-footer" id="footer" style="background-color:#290040"><section class="sitemap"><a href="/metaconfig/" class="nav-home"><img src="/metaconfig/img/scalameta-logo.png" alt="Metaconfig" width="66" height="58"/></a><div><h5>Metaconfig Docs</h5><a href="/metaconfig/docs/getting-started.html">Getting started</a></div><div><h5>Community</h5><a href="https://github.com/scalameta/metaconfig" target="_blank"><img src="https://img.shields.io/github/stars/scalameta/metaconfig.svg?color=%23087e8b&amp;label=stars&amp;logo=github&amp;style=social"/></a><a href="https://discord.gg/RFpSVth" target="_blank"><img src="https://img.shields.io/discord/632642981228314653?logo=discord&amp;style=social"/></a><a href="https://gitter.im/scalameta/metaconfig" target="_blank"><img src="https://img.shields.io/gitter/room/scalameta/metaconfig.svg?logo=gitter&amp;style=social"/></a><a href="https://twitter.com/scalameta" target="_blank"><img src="https://img.shields.io/twitter/follow/scalameta.svg?logo=twitter&amp;style=social"/></a></div></section><section class="copyright">Copyright © 2020 Scalameta</section></footer></div></body></html>